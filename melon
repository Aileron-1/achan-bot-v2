''' Melon Command Line Interface 
'''

import sys

def serve():
    print('serving')

def migrate():
    print('migrating')

def refresh():
    reply = input('are you sure you want to refresh the database? (y/N)')
    if (reply.lower() == 'y'):
        print('refreshing')
        migrate()
    else:
        print('cancelled')

args = sys.argv
command = 'serve'  # default command
subcommand = None
parameter = None

# Get commands
if len(args) > 1:
    command = args[1]
if len(args) > 2:
    subcommand = args[2]
if len(args) > 3:
    parameter = args[3]

# Run based on command
if command == 'migrate':
    if subcommand == 'fresh':
        refresh()
    else:
        migrate()

if command == 'serve':
    serve()

if command == 'make':
    if subcommand == 'migration':
        if parameter:
            print('making migration file:', parameter)

